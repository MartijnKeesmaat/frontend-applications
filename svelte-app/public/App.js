"use strict";function noop(){}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run)}function is_function(e){return"function"==typeof e}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function subscribe(e,t){const n=e.subscribe(t);return n.unsubscribe?()=>n.unsubscribe():n}function get_store_value(e){let t;return subscribe(e,e=>t=e)(),t}let current_component;function set_current_component(e){current_component=e}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function onMount(e){get_current_component().$$.on_mount.push(e)}function onDestroy(e){get_current_component().$$.on_destroy.push(e)}function setContext(e,t){get_current_component().$$.context.set(e,t)}function getContext(e){return get_current_component().$$.context.get(e)}const invalid_attribute_name_character=/[\s'">/=\u{FDD0}-\u{FDEF}\u{FFFE}\u{FFFF}\u{1FFFE}\u{1FFFF}\u{2FFFE}\u{2FFFF}\u{3FFFE}\u{3FFFF}\u{4FFFE}\u{4FFFF}\u{5FFFE}\u{5FFFF}\u{6FFFE}\u{6FFFF}\u{7FFFE}\u{7FFFF}\u{8FFFE}\u{8FFFF}\u{9FFFE}\u{9FFFF}\u{AFFFE}\u{AFFFF}\u{BFFFE}\u{BFFFF}\u{CFFFE}\u{CFFFF}\u{DFFFE}\u{DFFFF}\u{EFFFE}\u{EFFFF}\u{FFFFE}\u{FFFFF}\u{10FFFE}\u{10FFFF}]/u;function spread(e){const t=Object.assign({},...e);let n="";return Object.keys(t).forEach(e=>{if(invalid_attribute_name_character.test(e))return;const o=t[e];if(void 0===o)return;!0===o&&(n+=" "+e);const i=String(o).replace(/"/g,"&#34;").replace(/'/g,"&#39;");n+=" "+e+"="+JSON.stringify(i)}),n}const escaped={'"':"&quot;","'":"&#39;","&":"&amp;","<":"&lt;",">":"&gt;"};function escape(e){return String(e).replace(/["'&<>]/g,e=>escaped[e])}function each(e,t){let n="";for(let o=0;o<e.length;o+=1)n+=t(e[o],o);return n}const missing_component={$$render:()=>""};function validate_component(e,t){if(!e||!e.$$render)throw"svelte:component"===t&&(t+=" this={...}"),new Error(`<${t}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);return e}let on_destroy;function create_ssr_component(e){function t(t,n,o,i){const r=current_component;set_current_component({$$:{on_destroy:on_destroy,context:new Map(r?r.$$.context:[]),on_mount:[],before_update:[],after_update:[],callbacks:blank_object()}});const a=e(t,n,o,i);return set_current_component(r),a}return{render:(e={},n={})=>{on_destroy=[];const o={head:"",css:new Set},i=t(o,e,{},n);return run_all(on_destroy),{html:i,css:{code:Array.from(o.css).map(e=>e.code).join("\n"),map:null},head:o.head}},$$render:t}}function add_attribute(e,t,n){return null==t||n&&!t?"":` ${e}${!0===t?"":`=${"string"==typeof t?JSON.stringify(escape(t)):`"${t}"`}`}`}const subscriber_queue=[];function readable(e,t){return{subscribe:writable(e,t).subscribe}}function writable(e,t=noop){let n;const o=[];function i(t){if(safe_not_equal(e,t)&&(e=t,n)){const t=!subscriber_queue.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),subscriber_queue.push(n,e)}if(t){for(let e=0;e<subscriber_queue.length;e+=2)subscriber_queue[e][0](subscriber_queue[e+1]);subscriber_queue.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(r,a=noop){const s=[r,a];return o.push(s),1===o.length&&(n=t(i)||noop),r(e),()=>{const e=o.indexOf(s);-1!==e&&o.splice(e,1),0===o.length&&(n(),n=null)}}}}function derived(e,t,n){const o=!Array.isArray(e),i=o?[e]:e,r=t.length<2;return readable(n,e=>{let n=!1;const a=[];let s=0,c=noop;const u=()=>{if(s)return;c();const n=t(o?a[0]:a,e);r?e(n):c=is_function(n)?n:noop},l=i.map((e,t)=>e.subscribe(e=>{a[t]=e,s&=~(1<<t),n&&u()},()=>{s|=1<<t}));return n=!0,u(),function(){run_all(l),c()}})}const LOCATION={},ROUTER={};function getLocation(e){return{...e.location,state:e.history.state,key:e.history.state&&e.history.state.key||"initial"}}function createHistory(e,t){const n=[];let o=getLocation(e);return{get location(){return o},listen(t){n.push(t);const i=()=>{o=getLocation(e),t({location:o,action:"POP"})};return e.addEventListener("popstate",i),()=>{e.removeEventListener("popstate",i);const o=n.indexOf(t);n.splice(o,1)}},navigate(t,{state:i,replace:r=!1}={}){i={...i,key:Date.now()+""};try{r?e.history.replaceState(i,null,t):e.history.pushState(i,null,t)}catch(n){e.location[r?"replace":"assign"](t)}o=getLocation(e),n.forEach(e=>e({location:o,action:"PUSH"}))}}}function createMemorySource(e="/"){let t=0;const n=[{pathname:e,search:""}],o=[];return{get location(){return n[t]},addEventListener(e,t){},removeEventListener(e,t){},history:{get entries(){return n},get index(){return t},get state(){return o[t]},pushState(e,i,r){const[a,s=""]=r.split("?");t++,n.push({pathname:a,search:s}),o.push(e)},replaceState(e,i,r){const[a,s=""]=r.split("?");n[t]={pathname:a,search:s},o[t]=e}}}}const canUseDOM=Boolean("undefined"!=typeof window&&window.document&&window.document.createElement),globalHistory=createHistory(canUseDOM?window:createMemorySource()),paramRe=/^:(.+)/,SEGMENT_POINTS=4,STATIC_POINTS=3,DYNAMIC_POINTS=2,SPLAT_PENALTY=1,ROOT_POINTS=1;function startsWith(e,t){return e.substr(0,t.length)===t}function isRootSegment(e){return""===e}function isDynamic(e){return paramRe.test(e)}function isSplat(e){return"*"===e[0]}function segmentize(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function stripSlashes(e){return e.replace(/(^\/+|\/+$)/g,"")}function rankRoute(e,t){return{route:e,score:e.default?0:segmentize(e.path).reduce((e,t)=>(e+=SEGMENT_POINTS,isRootSegment(t)?e+=ROOT_POINTS:isDynamic(t)?e+=DYNAMIC_POINTS:isSplat(t)?e-=SEGMENT_POINTS+SPLAT_PENALTY:e+=STATIC_POINTS,e),0),index:t}}function rankRoutes(e){return e.map(rankRoute).sort((e,t)=>e.score<t.score?1:e.score>t.score?-1:e.index-t.index)}function pick(e,t){let n,o;const[i]=t.split("?"),r=segmentize(i),a=""===r[0],s=rankRoutes(e);for(let e=0,i=s.length;e<i;e++){const i=s[e].route;let c=!1;if(i.default){o={route:i,params:{},uri:t};continue}const u=segmentize(i.path),l={},d=Math.max(r.length,u.length);let p=0;for(;p<d;p++){const e=u[p],t=r[p];if(void 0!==e&&isSplat(e)){l["*"===e?"*":e.slice(1)]=r.slice(p).map(decodeURIComponent).join("/");break}if(void 0===t){c=!0;break}let n=paramRe.exec(e);if(n&&!a){const e=decodeURIComponent(t);l[n[1]]=e}else if(e!==t){c=!0;break}}if(!c){n={route:i,params:l,uri:"/"+r.slice(0,p).join("/")};break}}return n||o||null}function match(e,t){return pick([e],t)}function addQuery(e,t){return e+(t?`?${t}`:"")}function resolve(e,t){if(startsWith(e,"/"))return e;const[n,o]=e.split("?"),[i]=t.split("?"),r=segmentize(n),a=segmentize(i);if(""===r[0])return addQuery(i,o);if(!startsWith(r[0],".")){return addQuery(("/"===i?"":"/")+a.concat(r).join("/"),o)}const s=a.concat(r),c=[];return s.forEach(e=>{".."===e?c.pop():"."!==e&&c.push(e)}),addQuery("/"+c.join("/"),o)}function combinePaths(e,t){return`${stripSlashes("/"===t?e:`${stripSlashes(e)}/${stripSlashes(t)}`)}/`}const Router=create_ssr_component((e,t,n,o)=>{let i,r,a,{basepath:s="/",url:c=null}=t;const u=getContext(LOCATION),l=getContext(ROUTER),d=writable([]);a=get_store_value(d);const p=writable(null);let m=!1;const h=u||writable(c?{pathname:c}:globalHistory.location);r=get_store_value(h);const v=l?l.routerBase:writable({path:s,uri:s});i=get_store_value(v);const f=derived([v,p],([e,t])=>{if(null===t)return e;const{path:n}=e,{route:o,uri:i}=t;return{path:o.default?n:o.path.replace(/\*.*$/,""),uri:i}});u||(onMount(()=>{return globalHistory.listen(e=>{h.set(e.location)})}),setContext(LOCATION,h)),setContext(ROUTER,{activeRoute:p,base:v,routerBase:f,registerRoute:function(e){const{path:t}=i;let{path:n}=e;if(e._path=n,e.path=combinePaths(t,n),"undefined"==typeof window){if(m)return;const t=match(e,r.pathname);t&&(p.set(t),m=!0)}else d.update(t=>(t.push(e),t))},unregisterRoute:function(e){d.update(t=>{const n=t.indexOf(e);return t.splice(n,1),t})}}),void 0===t.basepath&&n.basepath&&void 0!==s&&n.basepath(s),void 0===t.url&&n.url&&void 0!==c&&n.url(c),i=get_store_value(v),r=get_store_value(h),a=get_store_value(d);{const{path:e}=i;d.update(t=>(t.forEach(t=>t.path=combinePaths(e,t._path)),t))}{const e=pick(a,r.pathname);p.set(e)}return`${o.default?o.default({}):""}`}),Route=create_ssr_component((e,t,n,o)=>{let i,r,{path:a="",component:s=null}=t;const{registerRoute:c,unregisterRoute:u,activeRoute:l}=getContext(ROUTER);i=get_store_value(l);const d=getContext(LOCATION);r=get_store_value(d);const p={path:a,default:""===a};let m={},h={};c(p),"undefined"!=typeof window&&onDestroy(()=>{u(p)}),void 0===t.path&&n.path&&void 0!==a&&n.path(a),void 0===t.component&&n.component&&void 0!==s&&n.component(s),i=get_store_value(l),r=get_store_value(d),i&&i.route===p&&(m=i.params);{const{path:e,component:n,...o}=t;h=o}return`${null!==i&&i.route===p?`${null!==s?`${validate_component(s||missing_component,"svelte:component").$$render(e,Object.assign({location:r},m,h),{},{})}`:`${o.default?o.default({params:m,location:r}):""}`}`:""}`}),Link=create_ssr_component((e,t,n,o)=>{let i,r,{to:a="#",replace:s=!1,state:c={},getProps:u=(()=>({}))}=t;const{base:l}=getContext(ROUTER);i=get_store_value(l);const d=getContext(LOCATION);let p,m,h,v;r=get_store_value(d),void 0===t.to&&n.to&&void 0!==a&&n.to(a),void 0===t.replace&&n.replace&&void 0!==s&&n.replace(s),void 0===t.state&&n.state&&void 0!==c&&n.state(c),void 0===t.getProps&&n.getProps&&void 0!==u&&n.getProps(u),i=get_store_value(l),r=get_store_value(d),p="/"===a?i.uri:resolve(a,i.uri),m=startsWith(r.pathname,p);let f=(h=p===r.pathname)?"page":void 0;return v=u({location:r,href:p,isPartiallyCurrent:m,isCurrent:h}),`<a${spread([{href:`${escape(p)}`},{"aria-current":`${escape(f)}`},v])}>\n\t  ${o.default?o.default({}):""}\n\t</a>`}),ListItem=create_ssr_component((e,t,n,o)=>{let{name:i}=t;return void 0===t.name&&n.name&&void 0!==i&&n.name(i),`<li>The name is ${escape(i)}</li>`});let name="world";const Home=create_ssr_component((e,t,n,o)=>{return`<h1>Hello ${escape(name)} ${escape(0)}!</h1>\n\n\t<ul>\n\t  ${each([{name:"This is a component"},{name:"This is a component"},{name:"This is a component"}],({id:t,name:n},o)=>`${validate_component(ListItem,"Item").$$render(e,{name:n},{},{})}`)}\n\t</ul>\n\n\t<button>\n\t  Clicked ${escape(0)} ${escape("times")}\n\t</button>`}),RetrieveData=create_ssr_component((e,t,n,o)=>{let{results:i}=t;return void 0===t.results&&n.results&&void 0!==i&&n.results(i),`${i.length>0?`${each(i,({id:e,title:t,description:n,imageLink:o},i)=>`<h2>${escape(t)}</h2>\n\t    <p>${escape(n)}</p>\n\t    <img${add_attribute("src",o,0)} alt="">`)}`:"<p>Loading</p>"}`}),css={code:"canvas.svelte-1xwrbkv{position:fixed}video.svelte-1xwrbkv{width:800px;height:400px}",map:'{"version":3,"file":"Video.svelte","sources":["Video.svelte"],"sourcesContent":["<script>\\n  import { onMount } from \\"svelte\\";\\n  let context, video, canvas, w, h, ratio;\\n\\n  onMount(() => {\\n    video = document.querySelector(\\"video\\");\\n    canvas = document.querySelector(\\"#canvas\\");\\n    console.log(video, canvas);\\n    context = canvas.getContext(\\"2d\\");\\n\\n    video.addEventListener(\\n      \\"loadedmetadata\\",\\n      function() {\\n        ratio = video.videoWidth / video.videoHeight;\\n        w = video.videoWidth - 100;\\n        h = parseInt(w / ratio, 10);\\n        canvas.width = w;\\n        canvas.height = h;\\n      },\\n      false\\n    );\\n  });\\n  function snap() {\\n    context.fillRect(0, 0, w, h);\\n    context.drawImage(video, 0, 0, w, h);\\n\\n    const image = canvas\\n      .toDataURL(\\"image/png\\")\\n      .replace(\\"image/png\\", \\"image/octet-stream\\"); // here is the most important part because if you dont replace you will get a DOM 18 exception.\\n    const base64 = new Image();\\n    base64.src = image;\\n    document.querySelector(\\".video-view\\").appendChild(base64);\\n\\n    context.clearRect(0, 0, canvas.width, canvas.height);\\n    console.log(base64);\\n  }\\n<\/script>\\n\\n<style>\\n  canvas {\\n    position: fixed;\\n  }\\n  video {\\n    width: 800px;\\n    height: 400px;\\n  }\\n</style>\\n\\n<section class=\\"video-view\\">\\n  <h1>Snapshot proto</h1>\\n\\n  <video controls>\\n    <source src=\\"./snow-monks.mp4\\" type=\\"video/mp4\\" />\\n  </video>\\n  <button id=\\"snap\\" on:click={snap}>Snap Photo</button>\\n  <canvas id=\\"canvas\\" width=\\"640\\" height=\\"480\\" />\\n</section>\\n"],"names":[],"mappings":"AAuCE,MAAM,eAAC,CAAC,AACN,QAAQ,CAAE,KAAK,AACjB,CAAC,AACD,KAAK,eAAC,CAAC,AACL,KAAK,CAAE,KAAK,CACZ,MAAM,CAAE,KAAK,AACf,CAAC"}'},Video=create_ssr_component((e,t,n,o)=>{let i,r,a,s,c,u;return onMount(()=>{r=document.querySelector("video"),a=document.querySelector("#canvas"),console.log(r,a),i=a.getContext("2d"),r.addEventListener("loadedmetadata",(function(){u=r.videoWidth/r.videoHeight,s=r.videoWidth-100,c=parseInt(s/u,10),a.width=s,a.height=c}),!1)}),e.css.add(css),'<section class="video-view">\n\t  <h1>Snapshot proto</h1>\n\n\t  <video controls class="svelte-1xwrbkv">\n\t    <source src="./snow-monks.mp4" type="video/mp4">\n\t  </video>\n\t  <button id="snap">Snap Photo</button>\n\t  <canvas id="canvas" width="640" height="480" class="svelte-1xwrbkv"></canvas>\n\t</section>'}),Blog=create_ssr_component((e,t,n,o)=>`${validate_component(Router,"Router").$$render(e,{},{},{default:()=>`\n\t  <h1>Blog</h1>\n\n\t  <ul>\n\t    <li>${validate_component(Link,"Link").$$render(e,{to:"first"},{},{default:()=>"Today I did something cool"})}</li>\n\t    <li>${validate_component(Link,"Link").$$render(e,{to:"second"},{},{default:()=>"I did something awesome today"})}</li>\n\t    <li>${validate_component(Link,"Link").$$render(e,{to:"third"},{},{default:()=>"Did something sweet today"})}</li>\n\t  </ul>\n\n\t  ${validate_component(Route,"Route").$$render(e,{path:"first"},{},{default:()=>"\n\t    <p>\n\t      I did something cool today. Lorem ipsum dolor sit amet, consectetur \n\t      adipisicing elit. Quisquam rerum asperiores, ex animi sunt ipsum. Voluptas \n\t      sint id hic. Vel neque maxime exercitationem facere culpa nisi, nihil \n\t      incidunt quo nostrum, beatae dignissimos dolores natus quaerat! Quasi sint \n\t      praesentium inventore quidem, deserunt atque ipsum similique dolores maiores\n\t      expedita, qui totam. Totam et incidunt assumenda quas explicabo corporis \n\t      eligendi amet sint ducimus, culpa fugit esse. Tempore dolorum sit \n\t      perspiciatis corporis molestias nemo, veritatis, asperiores earum! \n\t      Ex repudiandae aperiam asperiores esse minus veniam sapiente corrupti \n\t      alias deleniti excepturi saepe explicabo eveniet harum fuga numquam \n\t      nostrum adipisci pariatur iusto sint, impedit provident repellat quis?\n\t    </p>\n\t  "})}\n\t  ${validate_component(Route,"Route").$$render(e,{path:"second"},{},{default:()=>"\n\t    <p>\n\t      I did something awesome today. Lorem ipsum dolor sit amet, consectetur \n\t      adipisicing elit. Repudiandae enim quasi animi, vero deleniti dignissimos \n\t      sapiente perspiciatis. Veniam, repellendus, maiores.\n\t    </p>\n\t  "})}\n\t  ${validate_component(Route,"Route").$$render(e,{path:"third"},{},{default:()=>"\n\t    <p>\n\t      I did something sweet today. Lorem ipsum dolor sit amet, consectetur \n\t      adipisicing elit. Modi ad voluptas rem consequatur commodi minima doloribus \n\t      veritatis nam, quas, culpa autem repellat saepe quam deleniti maxime delectus \n\t      fuga totam libero sit neque illo! Sapiente consequatur rem minima expedita \n\t      nemo blanditiis, aut veritatis alias nostrum vel? Esse molestias placeat, \n\t      doloribus commodi.\n\t    </p>\n\t  "})}\n\t`})}`);function getProps({location:e,href:t,isPartiallyCurrent:n,isCurrent:o}){return("/"===t?o:n||o)?{class:"active"}:{}}const NavLink=create_ssr_component((e,t,n,o)=>{let{to:i=""}=t;return void 0===t.to&&n.to&&void 0!==i&&n.to(i),`${validate_component(Link,"Link").$$render(e,{to:i,getProps:getProps},{},{default:()=>`\n\t  ${o.default?o.default({}):""}\n\t`})}`}),queryUrl="https://api.data.netwerkdigitaalerfgoed.nl/datasets/ivo/NMVW/services/NMVW-20/sparql",App=create_ssr_component((e,t,n,o)=>{let{url:i=""}=t;let r=[];return onMount(()=>{!function(e,t){fetch(e+"?query="+encodeURIComponent(t)+"&format=json").then(e=>e.json()).then(e=>{r=(r=(r=JSON.parse(JSON.stringify(e.results))).bindings).map((e,t)=>({id:t,description:e.description.value,imageLink:e.imageLink.value,title:e.title.value,placeName:e.placeName.value}))})}(queryUrl,'\n  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>\n  PREFIX dc: <http://purl.org/dc/elements/1.1/>\n  PREFIX dct: <http://purl.org/dc/terms/>\n  PREFIX skos: <http://www.w3.org/2004/02/skos/core#>\n  PREFIX edm: <http://www.europeana.eu/schemas/edm/>\n  PREFIX foaf: <http://xmlns.com/foaf/0.1/>\n  SELECT ?cho ?title ?placeName ?description ?imageLink WHERE {\n    <https://hdl.handle.net/20.500.11840/termmaster7745> skos:narrower* ?place . #Ind0\n    ?place skos:prefLabel ?placeName .\n      \n    <https://hdl.handle.net/20.500.11840/termmaster16239> skos:narrower* ?cat . # Strijd en oorlog\n    # ?cat skos:prefLabel ?catLabel .\n    ?cho dct:spatial ?place ;\n    dc:type ?type ;\n    edm:isShownBy ?imageLink ;\n    dc:description ?description ;\n    dc:title ?title .\n    # FILTER langMatches(lang(?title), "ned")\n  }\n  LIMIT 50\n  ')}),void 0===t.url&&n.url&&void 0!==i&&n.url(i),`${validate_component(Router,"Router").$$render(e,{url:i},{},{default:()=>`\n\t  \n\t  <nav>\n\t    ${validate_component(NavLink,"NavLink").$$render(e,{to:"/"},{},{default:()=>"Home"})}\n\t    ${validate_component(NavLink,"NavLink").$$render(e,{to:"video"},{},{default:()=>"Video"})}\n\t    ${validate_component(NavLink,"NavLink").$$render(e,{to:"blog"},{},{default:()=>"Blog"})}\n\t    ${validate_component(NavLink,"NavLink").$$render(e,{to:"retrieve-data"},{},{default:()=>"Retrieve Data"})}\n\t  </nav>\n\n\t  \n\t  <div>\n\t    ${validate_component(Route,"Route").$$render(e,{path:"video",component:Video},{},{})}\n\t    ${validate_component(Route,"Route").$$render(e,{path:"retrieve-data",results:r,component:RetrieveData},{},{})}\n\t    ${validate_component(Route,"Route").$$render(e,{path:"blog/*",component:Blog},{},{})}\n\t    ${validate_component(Route,"Route").$$render(e,{path:"/",component:Home},{},{})}\n\t  </div>\n\t`})}`});module.exports=App;
